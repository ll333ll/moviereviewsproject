{% extends "base.html" %}

{% block title %}Home | Movie App{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center">Bienvenido, <span style="color: #ff4d4d;">{{ name }}</span></h1>

    <!-- Formulario de B√∫squeda -->
    <div class="search-bar mb-4">
        <form method="GET">
            <div class="input-group">
                <input type="text" class="form-control" name="searchMovie" placeholder="Buscar pel√≠culas..." required>
                <button type="submit" class="btn btn-danger">üîç Buscar</button>
            </div>
        </form>
    </div>

    <!-- Formulario de Suscripci√≥n -->
    <div class="text-center mb-4">
        <form action="{% url 'signup' %}" method="GET">
            <div class="input-group">
                <input type="email" class="form-control" name="email" placeholder="Suscr√≠bete con tu correo">
                <button type="submit" class="btn btn-danger">üì© Suscribirse</button>
            </div>
        </form>
    </div>

    <!-- Lista de Pel√≠culas -->
    <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for movie in movies %}
        <div class="col">
            <div class="card shadow-lg h-100">
                {% if movie.image %}
                    <img src="{{ movie.image.url }}" class="card-img-top" alt="{{ movie.title }}">
                {% else %}
                    <img src="/media/images/default.jpg" class="card-img-top" alt="default image">
                {% endif %}
                <div class="card-body bg-dark text-white">  <!-- Fondo oscuro para mejorar visibilidad -->
                    <h5 class="card-title">{{ movie.title }}</h5>
                    <p class="card-text">{{ movie.description|default:"No hay descripci√≥n disponible." }}</p>

                    <!-- Detalles adicionales: A√±o, G√©nero -->
                    <p class="movie-details">üéû A√±o: {{ movie.year }}</p>
                    <p class="movie-details">üìΩ G√©nero: {{ movie.genre }}</p>

                    {% if movie.url %}
                    <a href="{{ movie.url }}" class="btn btn-danger">üé¨ Ver Pel√≠cula</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
            <p class="text-center text-muted">No se encontraron pel√≠culas.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
